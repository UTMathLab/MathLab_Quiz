import{_ as D,a as S}from"./CexE7mKb.js";import{d as w,r as v,o as C,k as b,I as N,x as l,y as n,z as o,J as h,K as Q,L as x,M as F,A as p,N as B,B as g,_ as E}from"./OpAaggL_.js";import{i as L,g as M,a as V,d as j}from"./CCgwrcwB.js";const A={key:0,class:"loading-quiz-overlay"},G={key:1,class:"test-container"},P={class:"controls"},J={class:"control-group"},K=["value"],T={class:"control-group"},U={for:"question-index"},R=["disabled"],X=["max"],Y=["disabled"],$={class:"wrapper"},H={class:"question-wrapper"},O={key:1,class:"no-data"},W=w({__name:"test",setup(Z){const q=L({apiKey:"AIzaSyCNCFq6bjmPkrNjnNy-pm4JTyoIIIb7G6I",authDomain:"mathlab-quiz.firebaseapp.com",projectId:"mathlab-quiz",storageBucket:"mathlab-quiz.firebasestorage.app",messagingSenderId:"15973731988",appId:"1:15973731988:web:02e3f5fd0848dfb784ae81",measurementId:"G-4XGRENY9QF"}),y=M(q),i=v([]),r=v(!0);C(async()=>{r.value=!0;try{const a=["level-0","level-1","level-2","level-3","level-4","level-5"].map(t=>V(j(y,"quizzes",t))),m=await Promise.all(a),d=[];m.forEach(t=>{t.exists()?d.push(t.data().data):(console.error(`Error: Document ${t.id} not found!`),d.push([]))}),i.value=d}catch(s){console.error("Failed to fetch quiz data from Firestore:",s)}finally{r.value=!1}});const z=v(["中学生簡単","中学生難しい","高校生簡単","高校生難しい","大学生簡単","大学生難しい"]),u=v(0),e=v(0),c=b(()=>{if(r.value||!i.value)return null;const s=i.value[u.value];return s&&s[e.value]||null}),_=b(()=>{if(r.value||!i.value)return 0;const s=i.value[u.value];return!s||s.length===0?0:s.length-1}),I=()=>{e.value>0&&e.value--},k=()=>{e.value<_.value&&e.value++};return N(u,()=>{e.value=0}),(s,a)=>{const m=D,d=S;return n(),l("div",null,[r.value?(n(),l("div",A," クイズデータを読み込んでいます... ")):(n(),l("div",G,[o("div",P,[o("div",J,[a[2]||(a[2]=o("label",{for:"level-select"},"レベル:",-1)),h(o("select",{id:"level-select","onUpdate:modelValue":a[0]||(a[0]=t=>u.value=t)},[(n(!0),l(x,null,F(z.value,(t,f)=>(n(),l("option",{value:f,key:f},p(t)+" ("+p((i.value||[])[f]?.length||0)+" 問) ",9,K))),128))],512),[[Q,u.value,void 0,{number:!0}]])]),o("div",T,[o("label",U,"問題番号 (0-"+p(_.value)+"):",1),o("button",{onClick:I,disabled:e.value<=0},"◀",8,R),h(o("input",{id:"question-index",type:"number","onUpdate:modelValue":a[1]||(a[1]=t=>e.value=t),min:"0",max:_.value,class:"index-input"},null,8,X),[[B,e.value,void 0,{number:!0}]]),o("button",{onClick:k,disabled:e.value>=_.value},"▶",8,Y)])]),o("div",$,[o("div",H,[c.value?(n(),l(x,{key:0},[g(m,{question:c.value.question,class:"text"},null,8,["question"]),g(d,{options:c.value.options,fontSize:c.value.fontSize,correctIndex:c.value.answer,onSelect:()=>{},class:"option"},null,8,["options","fontSize","correctIndex"])],64)):(n(),l("div",O," 指定された問題データがありません。(レベル: "+p(u.value)+", 番号: "+p(e.value)+") ",1))])])]))])}}}),ae=E(W,[["__scopeId","data-v-64bf1cf6"]]);export{ae as default};
